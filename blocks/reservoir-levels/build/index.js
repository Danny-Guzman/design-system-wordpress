!function(){"use strict";var e,t={681:function(){var e=window.wp.blocks,t=window.wp.element,a=(window.wp.i18n,window.wp.blockEditor),r=window.wp.components;const l=[{label:"Select a Station",value:""},{label:"Bullards Bar Reservoir",value:"BUL"},{label:"Cachuma Lake",value:"CCH"},{label:"Camanche Reservoir",value:"CMN"},{label:"Castaic Lake",value:"CAS"},{label:"Diamond Valley Lake",value:"DMV"},{label:"Don Pedro Reservoir",value:"DNP"},{label:"Folsom Lake",value:"FOL"},{label:"Lake McClure",value:"EXC"},{label:"Lake Oroville",value:"ORO"},{label:"Lake Shasta",value:"SHA"},{label:"Millerton Lake",value:"MIL"},{label:"New Melones Reservoir",value:"NML"},{label:"Pine Flat Dam",value:"PNF"},{label:"San Luis Reservoir",value:"SNL"},{label:"Trinity Lake",value:"CLE"},{label:"Warm Springs Reservoir",value:"WRS"}];var n=JSON.parse('{"u2":"caweb/reservoir-levels"}');(0,e.registerBlockType)(n.u2,{edit:function(e){let{setAttributes:n,attributes:{stationId:o,actDate:s,pctAvg:i,pctCap:c,cap:u,avg:v,storage:p}}=e;const d=(0,a.useBlockProps)(),h=135;let m=new Date,b=m.getDate(),g=m.getMonth()+1,w=m.getFullYear();b<10&&(b="0"+b),g<10&&(g="0"+g),m=w+"-"+g+"-"+b;let f=Math.round(h-h*c/100),E=Math.round(h-h*i/100);return null!=p&&p.toLocaleString("en-US"),Number.isInteger(v)&&v.toLocaleString("en-US"),Number.isInteger(u)&&u.toLocaleString("en-US"),(0,t.createElement)("div",d,(0,t.createElement)(r.SelectControl,{label:"Select a Station",value:o,options:l,onChange:e=>{n({stationId:e}),async function(e){let t="https://cdec.water.ca.gov/resapp/service/res/conditions?date="+m+"&stationIds="+e;const a=await fetch(t).then((e=>e.json()));n({actDate:a[0].actDate}),n({pctAvg:parseInt(a[0].pctAvg)}),n({pctCap:parseInt(a[0].pctCap)}),n({cap:parseInt(a[0].cap)}),n({avg:parseInt(a[0].avg)}),n({storage:parseInt(a[0].storage)})}(e)},className:"cdec-station-ids",__nextHasNoMarginBottom:!0}),(0,t.createElement)("drought-reservoir-levels",{"data-locale":"en-US"},null!=o&&""!=o?(0,t.createElement)("div",{class:"reservoir-data-viz"},(0,t.createElement)("div",{class:"reservoir-data-viz-overall"},(0,t.createElement)("div",{class:"sr-only"},(0,t.createElement)("h5",{class:"summary-header"},"Summary of current level")),(0,t.createElement)("p",{class:"current-level summary-stat"},(0,t.createElement)("span",{class:"data-viz-pct"},i,"%"),(0,t.createElement)("span",{style:{display:"block"}},"of average levels"))),(0,t.createElement)("div",{class:"reservoir-data-viz-graphic popover-container"},(0,t.createElement)("svg",{width:"150",height:"150",viewBox:"0 0 150 150","aria-hidden":"true"},(0,t.createElement)("defs",null,(0,t.createElement)("clipPath",{id:"rounded-water-bottom"},(0,t.createElement)("rect",{x:"30",y:"-15",width:"90",height:"150",rx:"15",ry:"15"}))),(0,t.createElement)("path",{class:"basin-capacity",d:"M0,150 L15,0 h10 v125 a15,15 0 0 0 15,15 h70 a15,15 0 0 0 15,-15 v-125 h10 L150,150 z"}),(0,t.createElement)("rect",{class:"basin-water",x:"30",y:Number.isInteger(f)?f:0,width:"90",height:Number.isInteger(f)?61:0,"clip-path":"url(#rounded-water-bottom)"}),(0,t.createElement)("line",{class:"historical-line",x1:"0",y1:Number.isInteger(E)?E:0,x2:"150",y2:Number.isInteger(E)?E:0,"stroke-width":"3","stroke-dasharray":"3 6","stroke-linecap":"round"}),(0,t.createElement)("rect",{class:"historical-line-hover-target",x:"0",y:Number.isInteger(E)?E-5:-5,width:"150",height:"10"})))):""))},save:function(e){return(0,t.createElement)(a.InnerBlocks.Content,null)}})}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=function(t,a,l,n){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],n=e[u][2];for(var s=!0,i=0;i<a.length;i++)(!1&n||o>=n)&&Object.keys(r.O).every((function(e){return r.O[e](a[i])}))?a.splice(i--,1):(s=!1,n<o&&(o=n));if(s){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,l,n]},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,o=a[0],s=a[1],i=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)r.o(s,l)&&(r.m[l]=s[l]);if(i)var u=i(r)}for(t&&t(a);c<o.length;c++)n=o[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},a=self.webpackChunkreservoir_levels=self.webpackChunkreservoir_levels||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var l=r.O(void 0,[431],(function(){return r(681)}));l=r.O(l)}();